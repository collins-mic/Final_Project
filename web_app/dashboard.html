<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard - MindWell</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- FONT IMPORTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    
    <header class="header">
        <div class="container header-content">
            <div class="logo-container">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z" fill="var(--primary-color)"/><path d="M12 17.5C15.03 17.5 17.5 15.03 17.5 12C17.5 8.97 15.03 6.5 12 6.5C8.97 6.5 6.5 8.97 6.5 12C6.5 15.03 8.97 17.5 12 17.5ZM12 8.5C13.93 8.5 15.5 10.07 15.5 12C15.5 13.93 13.93 15.5 12 15.5C10.07 15.5 8.5 13.93 8.5 12C8.5 10.07 10.07 8.5 12 8.5Z" fill="var(--primary-color)"/></svg>
                <h3>MindWell</h3>
            </div>
            <div class="user-info">
                <span id="user-email">Loading...</span>
                <a href="resources.html" class="btn btn-secondary btn-small">Get Help</a>
                <a href="feedback.html" class="btn btn-secondary btn-small">Feedback</a>
                <button id="logout-button" class="btn btn-secondary btn-small">Log Out</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <h1 class="main-title animated-fade-in">Welcome back, <span id="user-name"></span>!</h1>

        <div id="app-message" class="message-box success-box hidden"></div>

        <div class="dashboard-grid">
            
            <div class="card animated-fade-in" id="new-entry-card">
                <h2>New Check-in</h2>
                <p class="mood-question">I am feeling <span id="selected-mood-label" class="mood-highlight"> Okay</span>!</p>
                <div class="mood-selector">
                    <input type="radio" name="mood" id="mood-1" value="1" class="mood-input"><label for="mood-1" class="mood-label" title="Awful">üò•</label>
                    <input type="radio" name="mood" id="mood-2" value="2" class="mood-input"><label for="mood-2" class="mood-label" title="Not Great">üòï</label>
                    <input type="radio" name="mood" id="mood-3" value="3" class="mood-input" checked><label for="mood-3" class="mood-label" title="Okay">üòê</label>
                    <input type="radio" name="mood" id="mood-4" value="4" class="mood-input"><label for="mood-4" class="mood-label" title="Good">üòä</label>
                    <input type="radio" name="mood" id="mood-5" value="5" class="mood-input"><label for="mood-5" class="mood-label" title="Amazing!">üòÑ</label>
                </div>

                <!--  Mood Tags  -->
                <div class="form-group">
                    <label>What's on your mind? (Optional tags)</label>
                    <div class="mood-tags-container">
                        <button class="mood-tag" data-tag="School">School</button>
                        <button class="mood-tag" data-tag="Friends">Friends</button>
                        <button class="mood-tag" data-tag="Family">Family</button>
                        <button class="mood-tag" data-tag="Health">Health</button>
                        <button class="mood-tag" data-tag="Work">Work</button>
                        <button class="mood-tag" data-tag="Other">Other</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="journal-entry">Private journal entry (optional)</label>
                    <textarea id="journal-entry" rows="4" placeholder="Add more details here..."></textarea>
                </div>
                
                <button id="save-entry-button" class="btn btn-primary">Save Entry</button>
            </div>

            <!--  Mood Chart -->
            <div class="card animated-fade-in" id="chart-card">
                <h2>Your Mood Over Time</h2>
                <div class="chart-container">
                    <canvas id="moodChart"></canvas>
                </div>
            </div>

        </div>

        <!-- Analytics Row  -->
        <div class="dashboard-grid">
            <div class="card animated-fade-in" id="analytics-chart-card">
                <h2>What's Affecting Your Mood?</h2>
                <div class="chart-container">
                    <canvas id="tagsChart"></canvas>
                </div>
            </div>
            <div class="card animated-fade-in" id="analytics-stats-card">
                <h2>Your Insights</h2>
                <div id="analytics-stats-content">
                    <div class="stat-item">
                        <span class="stat-label">Total Entries</span>
                        <span class="stat-value" id="stat-total-entries">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Average Mood</span>
                        <span class="stat-value" id="stat-avg-mood">--</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Most Common Tag</span>
                        <span class="stat-value" id="stat-common-tag">--</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Past Entries -->
        <div class="card animated-fade-in" id="past-entries-card">
            <h2>Past Entries</h2>
            <div id="past-entries-list">
            </div>
            <div id="loading-spinner" class="spinner"></div>
        </div>
    </main>

    <footer class="footer-container">
        <div class="container footer-content">
            <div class="footer-links">
                <a href="feedback.html">Submit Feedback</a>
                <a href="mailto:collinsirunguh@gmail.com?subject=MindWell App Feedback">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.558Z"/>
                    </svg>
                    Contact Developer
                </a>
            </div>
            <p class="footer-copyright">
                ¬© 2025 MindWell. All rights reserved.
            </p>
        </div>
    </footer>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
    
    <!-- Chart.js SDK -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- App JS -->
    <script src="app.js" defer></script>
    <script src="resources.js" defer></script>
</body>
</html>